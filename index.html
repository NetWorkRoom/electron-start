<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello Electron!</title>
    <style media="screen">
      webview {
        height: 500px;
        border: 1px solid grey;
      }   
      input {
        font-size: 1rem;
      }   
    </style>
  </head>
  <body>
    <h1 style="color:brown;">HTML контент загружен из файла index.html</h1>
    <p>Просто немного текста для примера</p>
    <!-- Весь Node.js APIs будет доступен здесь. -->
    Вы используете Node.js - <script>document.write(process.versions.node)</script>,
    Chromium - <script>document.write(process.versions.chrome)</script>,
    и Electron - <script>document.write(process.versions.electron)</script>.

    <!-- <h1>webFrame</h1>
    <img src="http://placehold.it/200x150" alt="">
    <hr>
    <button id="zoom_up">Увеличить</button>
    <button id="zoom_down">Уменьшить</button>
    <button id="zoom_reset">Вернуть</button>
    <hr>
    <h3>Напишите JavaScript код</h3>
    <textarea id="code" name="name" id="" cols="30" rows="10"></textarea>
    <hr>
    <button id="run_js">Запустить</button>
    <hr> 
    <webview id="webviewtag" src="page1.html" />
    <hr> -->
    <hr>
    <input id="url" type="text" placeholder="URL to load" />
    <button id="load">Load</button>
    <hr>
    <h4 id="currentPage"></h4>
    <hr>
    <webview id="webviewtag" src="page1.html"> 


    <script>
      // подключаем класс webFrame
      // const { webFrame } = require('electron')

      // Размер контента вэкране по умолчанию
      // let zoom = 0;

      // подключаем слушатель событий к кнопке Увеличить
      // document.getElementById('zoom_up').addEventListener('click', () => {
      //   // Вызываем метод .setZoomLevel и предаем значение zoom увеличеное на 1
      //   webFrame.setZoomLevel(++zoom)
      // })
      // подключаем слушатель событий к кнопке Уменьшить
      // document.getElementById('zoom_down').addEventListener('click', () => {
      //   // Вызываем метод .setZoomLevel и предаем значение zoom уменьшеное на 1
      //   webFrame.setZoomLevel(--zoom)
      // })

      // подключаем слушатель событий к кнопке Вернуть
      // document.getElementById('zoom_reset').addEventListener('click', () => {
      //   // Вызываем метод .setZoomLevel и предаем значение zoom равное 0
      //   webFrame.setZoomLevel(zoom = 0)
      // })

      // подключаем слушатель событий к кнопке Запустить
      // document.getElementById('run_js').addEventListener('click', () => {
      //   let code = document.getElementById('code').value
      //   // Вызываем метод .executeJavaSript и предаем в него значение code
      //   webFrame.executeJavaScript(code)
      // })

      // Пример получение объекта с информацией о элементах на странице 
      // let resourceUsage = webFrame.getResourceUsage()
      // console.log(resourceUsage)

      // Пример отслеживания событий загрузки контента в webview
      const webview = document.getElementById('webviewtag')
      webview.addEventListener('did-start-loading', () => {
        console.log('Started Loading WebView!')
      })

      webview.addEventListener('did-stop-loading', () => {
         console.log('Finished Loading WebView!')
         // Меняем цвет фона окна после загрузки
         webview.insertCSS('body{background-color: orange !important;}')
      })

      // Получаем доступ к элементами для загрузки страницы
      const url = document.getElementById('url');
      const load = document.getElementById('load');
      const currentPage = document.getElementById('currentPage');

      // Загружаем страницу
      load.addEventListener('click', () => {
        webview.loadURL(url.value)
        url.value = '';
      });

      // Выводим на странице url загруженного контента
      webview.addEventListener('did-navigate', (event) => {
         currentPage.innerHTML = event.url
      })

      // Выводим на странице сообщение об ошибке загрузки
      webview.addEventListener('did-fail-load', (event) => {
         currentPage.innerHTML = 'Failed to load URL'
      })

    </script>
  </body>
</html>
